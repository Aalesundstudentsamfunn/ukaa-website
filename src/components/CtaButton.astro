---
import ExternalLink from "../assets/images/external-link.svg";

export interface Props {
  label: string;
  href?: string;
  disabled?: boolean;
  class?: string;
  newTab?: boolean;
  variant?: "default" | "tikkio";
}

const { label, href, disabled = false, class: cls = "", newTab = false, variant = "default" } = Astro.props as Props;

const targetProps = newTab ? { target: "_blank", rel: "noreferrer noopener" } : {};

const base =
  "cta-btn rounded-full px-6 py-2.5 text-[0.98rem] font-bold leading-none " +
  "inline-flex items-center gap-2.5 transition-all duration-200 " +
  "focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50";

const variants = {
  default:
    "bg-white text-[#1b1b1b] shadow-[0_3px_12px_rgba(0,0,0,0.12)] " +
    "hover:-translate-y-0.5 hover:shadow-[0_8px_24px_rgba(0,0,0,0.18)] " +
    "active:translate-y-0 active:bg-neutral-50",
  tikkio:
    "bg-[#1b1b1b] text-white shadow-[0_3px_14px_rgba(27,27,27,0.22)] " +
    "hover:-translate-y-0.5 hover:bg-[#2d2d2d] hover:shadow-[0_8px_28px_rgba(27,27,27,0.28)] " +
    "active:translate-y-0 active:bg-[#111]",
};

const enabled = variants[variant] ?? variants.default;
const disabledCls =
  "bg-neutral-300 text-neutral-500 opacity-60 cursor-not-allowed";
---

{
  !disabled && href ? (
    <a href={href} class={`${base} ${enabled} ${cls}`} {...targetProps}>
      <span>{label}</span>
      <ExternalLink class="h-4 w-4 opacity-70" />
    </a>
  ) : (
    <button
      type="button"
      disabled={disabled}
      class={`${base} ${disabled ? disabledCls : enabled} ${cls}`}
    >
      <span>{label}</span>
      {!disabled && <ExternalLink class="h-4 w-4 opacity-70" />}
    </button>
  )
}
