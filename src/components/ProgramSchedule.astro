---
type ProgramItem = {
  time: string;
  title: string;
  location?: string;
  description?: string;
};

export interface Props {
  items?: ProgramItem[];
  variant?: "mobile" | "desktop";
}

const { items = [], variant = "desktop" } = Astro.props;
const listClass = variant === "mobile" ? "timeline relative ml-1 space-y-5 text-sm" : "timeline relative ml-1 space-y-6";
const layoutClass = variant === "mobile" ? "grid gap-1" : "grid gap-2 sm:grid-cols-[92px_1fr] sm:items-start sm:gap-4";
const showItems = items.length > 0;
---

{
  showItems ? (
    <ul class={listClass}>
      {items.map((item, idx) => (
        <li class="timeline-item relative pl-6" data-time={item.time}>
          <span aria-hidden="true" class="timeline-bullet absolute left-0 top-1 h-2.5 w-2.5 -translate-x-1/2 rounded-full bg-sky-300 shadow-sm"></span>
          {idx < items.length - 1 && (
            <span aria-hidden="true" data-conn class="timeline-conn absolute left-0 top-3 h-0 w-[2px] -translate-x-1/2 rounded-full bg-white/25 overflow-hidden">
              <span aria-hidden="true" data-conn-fill class="timeline-conn-fill absolute left-0 top-0 h-0 w-full rounded-full bg-sky-300/80"></span>
            </span>
          )}
          <div class={layoutClass}>
            <time class="timeline-time text-xs font-semibold uppercase tracking-wide text-sky-200/90 whitespace-nowrap mt-1 leading-none">{item.time}</time>
            <div class="timeline-body">
              <div class="text-base font-semibold text-white">{item.title}</div>
              {item.location && <div class="text-sm text-white/70">{item.location}</div>}
              {item.description && <p class="mt-1 text-sm text-white/80">{item.description}</p>}
            </div>
          </div>
        </li>
      ))}
    </ul>
  ) : (
    <div class="rounded-xl border border-white/15 bg-white/5 px-4 py-3 text-sm text-white/85">
      Vi oppdaterer programmet fortl√∏pende.
    </div>
  )
}
